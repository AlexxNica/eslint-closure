'use strict';var p="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function r(a,b){for(var c,d,e=1;e<arguments.length;e++){d=arguments[e];for(c in d)a[c]=d[c];for(var m=0;m<p.length;m++)c=p[m],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}};var t=require("lodash.ismatchwith");function u(a){return function(b){return B(b,a)}}function B(a,b){var c={};return t(a,b,function(a,b){if("function"===typeof b)return a=b(a),"object"===typeof a&&r(c,a),a})?c:!1}function C(){var a;return function(b){var c={},c=(c.source=b,c);"object"===typeof a&&(a=u(a));if("function"===typeof a){b=a(b);if("object"===typeof b)return r(c,b),c;if(!b)return!1}return c}}var F=B;function L(a){return F(a,{type:"ExpressionStatement",expression:{type:"CallExpression",callee:{type:"MemberExpression",object:{type:"Identifier",name:"goog"},property:{type:"Identifier",name:"require"}},arguments:[{type:"Literal",value:function(a){return"string"===typeof a&&C()(a)}}]}})}
function M(a){return F(a,{type:"ExpressionStatement",expression:{type:"CallExpression",callee:{type:"MemberExpression",object:{type:"Identifier",name:"goog"},property:{type:"Identifier",name:"provide"}},arguments:[{type:"Literal",value:function(a){return"string"===typeof a&&C()(a)}}]}})};var N={w:"constant",A:"leading",i:"no_underscore",B:"middle",C:"opt_prefix",D:"trailing",F:"var_args"};function O(a){return""!==a&&a.length?a.toUpperCase()===a?N.w:-1===a.indexOf("_")?N.i:"var_args"===a?N.F:"opt_"===a.substring(0,4)&&"opt_"!=a?N.C:"_"===a[0]?N.A:"_"===a[a.length-1]?N.D:N.B:N.i}function P(a,b){for(a=a.parent;a.type!==b&&"Program"!==a.type;)a=a.parent;return a.type===b?a:null}function Q(a){return"ClassExpression"===a.type||"ClassDeclaration"===a.type}function R(a){return a.loc.end.line===a.loc.start.line}function S(a,b){return a.loc.start.line===b.loc.start.line};var U={J:!1,H:!1,G:!0,I:!0,m:!0};
function aa(a,b){function c(a){return Object.assign(m,{message:a})}function d(d,k){return ba(d,a,b)?e:c(k)}var e={node:a,message:"",M:!1},m={node:a,message:"",M:!0};switch(O(a.name)){case N.w:return e;case N.A:return b.G?d(a.name.replace(/^_+/g,"").replace(/_+$/g,""),"Identifier '"+a.name+"' is not in camel case after the leading underscore."):c("Leading underscores are not allowed in '"+a.name+"'.");case N.i:return e;case N.B:return d(a.name,"Identifier '"+a.name+"' is not in camel case.");case N.C:return b.H?
d(a.name.replace(/^opt_/g,""),"Identifier '"+a.name+"' is not in camel case after the opt_ prefix."):c("The opt_ prefix is not allowed in '"+a.name+"'.");case N.D:return b.I?d(a.name.replace(/^_+/g,"").replace(/_+$/g,""),"Identifier '"+a.name+"' is not in camel case before the trailing underscore."):c("Trailing underscores are not allowed in '"+a.name+"'.");case N.F:return b.J?e:c("The var_args identifier is not allowed.");default:throw Error("Unknown undercore form: "+a.name);}}
function ba(a,b,c){var d=b.parent;if(!(-1<a.indexOf("_")))return!0;switch(d.type){case "MemberExpression":d=b.parent;if(!c.m)return!0;if(d.property===b)return d.parent&&"AssignmentExpression"===d.parent.type?d.parent.right===d:!0;break;case "Property":d=b.parent;if(!c.m||d.parent&&"ObjectPattern"===d.parent.type&&d.key===b&&d.value!==b)return!0;break;case "CallExpression":return!0}return!1};function V(a,b,c,d){a=d?b.getLastToken(a):b.getFirstToken(a);b=b.getText(a,a.loc.start.column).split("");a=b.slice(0,b.findIndex(function(a){return" "!==a&&"\t"!==a}));b=a.filter(function(a){return" "===a}).length;a=a.filter(function(a){return"\t"===a}).length;return{v:b,tab:a,b:"space"===c?b:a,l:"space"===c?a:b}}function W(a,b,c){b=!0===c?b.getLastToken(a,1):b.getTokenBefore(a);return(!0===c?a.loc.end.line:a.loc.start.line)!==(b?b.loc.end.line:-1)}
function X(a,b){return!!b&&b.parent.loc.start.line===a.loc.start.line&&1<b.parent.declarations.length}function ca(a){if("CallExpression"!==a.parent.type)return!1;a=a.parent;if("MemberExpression"!==a.callee.type)return!1;a=a.callee;if("Identifier"!==a.object.type||"Identifier"!==a.property.type)return!1;var b=a.property;return"goog"===a.object.name&&"scope"===b.name}
function da(a){return a.declarations.reduce(function(b,c){var d=b[b.length-1];(c.loc.start.line!==a.loc.start.line&&!d||d&&d.loc.start.line!==c.loc.start.line)&&b.push(c);return b},[])}
function ea(a){var b={o:4,s:"space",N:{SwitchCase:0,VariableDeclarator:{R:1,O:1,L:1},g:-1,MemberExpression:-1,FunctionDeclaration:{f:-1,body:1},FunctionExpression:{f:-1,body:1}}},c=b.N;if(a.length&&("tab"===a[0]?(b.o=1,b.s="tab"):"number"===typeof a[0]&&(b.o=a[0],b.s="space"),a[1])){a=a[1];c.SwitchCase=a.SwitchCase||0;if("number"===typeof a.VariableDeclarator){var d=a.VariableDeclarator;c.VariableDeclarator={R:d,O:d,L:d}}else"object"===typeof a.VariableDeclarator&&Object.assign(c.VariableDeclarator,
a.VariableDeclarator);"number"===typeof a.g&&(c.g=a.g);"number"===typeof a.MemberExpression&&(c.MemberExpression=a.MemberExpression);"object"===typeof a.FunctionDeclaration&&Object.assign(c.FunctionDeclaration,a.FunctionDeclaration);"object"===typeof a.FunctionExpression&&Object.assign(c.FunctionExpression,a.FunctionExpression)}return b};function Y(a,b){b(a);if("NullableLiteral"!==a.type&&"AllLiteral"!==a.type&&"NullLiteral"!==a.type&&"UndefinedLiteral"!==a.type&&"VoidLiteral"!==a.type&&"StringLiteralType"!==a.type&&"NumericLiteralType"!==a.type&&"NameExpression"!==a.type)switch(a.type){case "ArrayType":a.elements.forEach(function(a){return Y(a,b)});break;case "RecordType":a.fields.forEach(function(a){return Y(a,b)});break;case "FunctionType":a.params.forEach(function(a){return Y(a,b)});a.result&&Y(a.result,b);a.this&&Y(a.this,b);
break;case "FieldType":a.value&&Y(a.value,b);break;case "ParameterType":case "RestType":case "NonNullableType":case "OptionalType":case "NullableType":Y(a.expression,b);break;case "TypeApplication":Y(a.expression,b);a.applications.forEach(function(a){return Y(a,b)});break;case "UnionType":a.elements.forEach(function(a){return Y(a,b)});break;default:throw Error("Unrecoginized tag type.");}};var fa=require("doctrine");function Z(a){return null===a.type||a.type.name&&"void"===a.type.name||"UndefinedLiteral"===a.type.type};module.exports={rules:{$:{meta:{docs:{description:"check identifiers for camel case with options for opt_ prefix and var_args identifiers",category:"Stylistic Issues",recommended:!0},schema:[{type:"object",properties:{J:{type:"boolean"},H:{type:"boolean"},G:{type:"boolean"},I:{type:"boolean"},m:{type:"boolean"}},h:!1}]},create:function(a){var b=Object.assign({},U,a.options[0]||{});return{Identifier:function(c){c=aa(c,b);c.M&&a.report({node:c.node,message:c.message})}}}},aa:{meta:{docs:{description:"enforce consistent indentation",
category:"Stylistic Issues",recommended:!1},fixable:"whitespace",schema:[{j:[{K:["tab"]},{type:"integer",c:0}]},{type:"object",properties:{SwitchCase:{type:"integer",c:0},VariableDeclarator:{j:[{type:"integer",c:0},{type:"object",properties:{R:{type:"integer",c:0},O:{type:"integer",c:0},L:{type:"integer",c:0}}}]},g:{type:"integer",c:0},MemberExpression:{type:"integer",c:0},FunctionDeclaration:{type:"object",properties:{f:{j:[{type:"integer",c:0},{K:["first"]}]},body:{type:"integer",c:0}}},FunctionExpression:{type:"object",
properties:{f:{j:[{type:"integer",c:0},{K:["first"]}]},body:{type:"integer",c:0}}}},h:!1}]},create:function(a){function b(a,b,l){a=a+" "+g+(1===a?"":"s");var c="space"+(1===b?"":"s"),d="tab"+(1===l?"":"s"),f;0<b&&0<l?f=b+" "+c+" and "+(l+" "+d):0<b?f="space"===g?b:b+" "+c:0<l?f="tab"===g?l:l+" "+d:f="0";return"Expected indentation of "+a+" but"+(" found "+f+".")}function c(v,D,l,c,d,f){var h=("space"===g?" ":"\t").repeat(D),e=f?[v.range[1]-l-c-1,v.range[1]-1]:[v.range[0]-l-c,v.range[0]];a.report({node:v,
loc:d,message:b(D,l,c),fix:function(a){return a.replaceTextRange(e,h)}})}function d(a,b){var l=V(a,h,g,!1);"ArrayExpression"!==a.type&&"ObjectExpression"!==a.type&&(l.b!==b||l.l)&&W(a,h)&&c(a,b,l.v,l.tab)}function e(a,b){a.forEach(function(a){return d(a,b)})}function m(a,b){var l=h.getLastToken(a),d=V(l,h,g,!0);(d.b!==b||d.l)&&W(a,h,!0)&&c(a,b,d.v,d.tab,{start:{line:l.loc.start.line,column:l.loc.start.column}},!0)}function z(a){var b=V(a,h,g).b,c=a.parent;"Property"===c.type||"ArrayExpression"===
c.type?b=V(a,h,g,!1).b:"CallExpression"===c.type&&1<=c.arguments.length&&c.arguments[0].loc.end.line>c.arguments[0].loc.start.line&&R(c.callee)&&!W(a,h)&&(b=V(c,h,g).b);return b}function k(a){var b=a.body,c=z(a),d=f,g;if(g=-1!==q.g)if(ca(a))g=!0;else{var h=a.parent;g=h.parent;if("CallExpression"!==h.type||h.callee!==a)g=!1;else{for(;"UnaryExpression"===g.type||"AssignmentExpression"===g.type||"LogicalExpression"===g.type||"SequenceExpression"===g.type||"VariableDeclarator"===g.type;)if("UnaryExpression"===
g.type)if(h=g,"!"===h.operator||"~"===h.operator||"+"===h.operator||"-"===h.operator)g=g.parent;else break;else g=g.parent;g=("ExpressionStatement"===g.type||"VariableDeclaration"===g.type)&&g.parent&&"Program"===g.parent.type}}g?d=q.g*f:"FunctionExpression"===a.type?d=q.FunctionExpression.body*f:"FunctionDeclaration"===a.type&&(d=q.FunctionDeclaration.body*f);c+=d;(g=P(a,"VariableDeclarator"))&&X(a,g)&&(c+=f*q.VariableDeclarator[g.parent.kind]);A(b,c,c-d)}function x(a){if(!R(a)){var b=a.body;a=z(a);
A(b,a+f,a)}}function n(a){var b=a.parent,d=P(a,"VariableDeclarator"),e=V(b,h,g).b;if(W(a,h)){if(d)if(b===d)d===d.parent.declarations[0]&&(e+=f*q.VariableDeclarator[d.parent.kind]);else{if("ObjectExpression"===b.type||"ArrayExpression"===b.type||"CallExpression"===b.type||"ArrowFunctionExpression"===b.type||"NewExpression"===b.type||"LogicalExpression"===b.type)e+=f}else("ArrayExpression"!==b.type?0:b.elements[0]&&"ObjectExpression"===b.elements[0].type&&b.elements[0].loc.start.line===b.loc.start.line)||
"MemberExpression"===b.type||"ExpressionStatement"===b.type||"AssignmentExpression"===b.type||"Property"===b.type||(e+=f);var b=e+f,k=V(a,h,g,!1);(k.b!==e||k.l)&&W(a,h)&&c(a,e,k.v,k.tab,{start:{line:a.loc.start.line,column:a.loc.start.column}})}else e=V(a,h,g).b,b=e+f;X(a,d)&&(b+=f*q.VariableDeclarator[d.parent.kind]);return b}function A(a,b,c){R(a)||(e(a.body,b),m(a,c))}function w(a){var b=V(a,h,g).b,c=b+f;"BlockStatement"===a.body.type?A(a.body,c,b):e([a.body],c)}function G(a,b,c){"first"===c&&
a.params.length?e(a.params.slice(1),a.params[0].loc.start.column):e(a.params,b*c)}function y(a,b){a="SwitchStatement"===a.type?a:a.parent;if(K[a.loc.start.line])return K[a.loc.start.line];"undefined"===typeof b&&(b=V(a,h,g).b);b=0<a.cases.length&&!q.SwitchCase?b:b+f*q.SwitchCase;return K[a.loc.start.line]=b}var E=ea(a.options),g=E.s,f=E.o,q=E.N,h=a.getSourceCode(),K={};return{Program:function(a){e(a.body,0)},ClassDeclaration:x,ClassExpression:x,BlockStatement:function(a){if(!R(a)&&("BlockStatement"==
a.parent.type||"Program"==a.parent.type)){var b=V(a,h,g).b;A(a,b+f,b)}},DoWhileStatement:w,ForStatement:w,ForInStatement:w,ForOfStatement:w,WhileStatement:w,WithStatement:w,IfStatement:function(a){var b=V(a,h,g).b,c=b+f;"BlockStatement"!==a.consequent.type?S(a,a.consequent)||d(a.consequent,c):(e(a.consequent.body,c),m(a.consequent,b));if(a.alternate){var k=h.getTokenBefore(a.alternate);d(k,b);"BlockStatement"!==a.alternate.type?S(a.alternate,k)||d(a.alternate,c):(e(a.alternate.body,c),m(a.alternate,
b))}},VariableDeclaration:function(a){if(!S(a.declarations[0],a.declarations[a.declarations.length-1])){var b=da(a),c=V(a,h,g).b,d=b[b.length-1],c=c+f*q.VariableDeclarator[a.kind];e(b,c);h.getLastToken(a).loc.end.line<=d.loc.end.line||(b=h.getTokenBefore(d),","===b.value?m(a,V(b,h,g).b):m(a,c-f))}},ObjectExpression:function(a){if(!R(a)){var b=a.properties;if(!(0<b.length&&S(b[0],a))){var c=n(a);e(b,c);m(a,c-f)}}},ArrayExpression:function(a){if(!R(a)){var b=a.elements.filter(function(a){return null!==
a});if(!(0<b.length&&S(b[0],a))){var c=n(a);e(b,c);m(a,c-f)}}},MemberExpression:function(a){if(-1!==q.MemberExpression&&!R(a)&&!P(a,"VariableDeclarator")&&!P(a,"AssignmentExpression")){var b=V(a,h,g).b+f*q.MemberExpression,c=[a.property];a=h.getTokenBefore(a.property);"Punctuator"===a.type&&"."===a.value&&c.push(a);e(c,b)}},SwitchStatement:function(a){var b=V(a,h,g).b,c=y(a,b);e(a.cases,c);m(a,b)},SwitchCase:function(a){if(!R(a)){var b=y(a);e(a.consequent,b+f)}},ArrowFunctionExpression:function(a){R(a)||
"BlockStatement"===a.body.type&&k(a)},FunctionDeclaration:function(a){R(a)||(-1!==q.FunctionDeclaration.f&&G(a,f,q.FunctionDeclaration.f),k(a))},FunctionExpression:function(a){R(a)||(-1!==q.FunctionExpression.f&&G(a,f,q.FunctionExpression.f),k(a))}}}},"inline-comment-spacing":{meta:{docs:{description:"enforce consistent spacing before the `//` at line end",category:"Stylistic Issues",recommended:!1},fixable:"whitespace",schema:[{type:"integer",c:0,ca:5}]},create:function(a){var b=null==a.options[0]?
1:a.options[0];return{LineComment:function(c){var d=a.getSourceCode();d.getComments(c);if((d=d.getTokenBefore(c,1)||d.getTokenOrCommentBefore(c))&&c.loc.end.line===d.loc.start.line){var e=c.start-d.end;e<b&&a.report({node:c,message:"Expected at least "+b+" "+(1===b?"space":"spaces")+" before inline comment.",fix:function(a){return a.insertTextBefore(c,Array(b-e+1).join(" "))}})}}}}},ba:{meta:{docs:{description:"enforce valid JSDoc comments",category:"Possible Errors",recommended:!0},schema:[{type:"object",
properties:{S:{type:"object",h:{type:"string"}},T:{type:"object",h:{type:"string"}},V:{type:"boolean"},U:{type:"boolean"},W:{type:"boolean"},P:{type:"string"},X:{type:"boolean"}},h:!1}]},create:function(a){function b(a){m.push({u:"ArrowFunctionExpression"===a.type&&"BlockStatement"!==a.body.type||Q(a)})}function c(b,c){Y(c,function(c){if("NameExpression"===c.type){c=c.name;var d=y[c];d&&a.report({node:b,message:"Use '"+d+"' instead of '"+c+"'."})}})}function d(b,c){var d=b.map(function(a){return a});
Y(c,function(b){"NameExpression"===b.type&&(b=c.name,"nonsense"==d&&a.markVariableAsUsed(b))})}function e(b){var f=z.getJSDocComment(b),e=m.pop(),h=Object.create(null),y=a.getScope(),v=!1,D=!1,l=!1,H=!1,T=!1,I;if(f){try{I=fa.parse(f.value,{ea:!0,unwrap:!0,sloppy:!0})}catch(ga){/braces/i.test(ga.message)?a.report({node:f,message:"JSDoc type missing brace."}):a.report({node:f,message:"JSDoc syntax error."});return}I.tags.forEach(function(b){switch(b.title.toLowerCase()){case "param":case "arg":case "argument":b.type||
a.report({node:f,message:"Missing JSDoc parameter type for '"+b.name+"'."});!b.description&&A&&a.report({node:f,message:"Missing JSDoc parameter description for "+("'"+b.name+"'.")});h[b.name]?a.report({node:f,message:"Duplicate JSDoc parameter '"+b.name+"'."}):-1===b.name.indexOf(".")&&(h[b.name]=1);break;case "return":case "returns":v=!0;n||e.u||null!==b.type&&Z(b)||T?(G&&!b.type&&a.report({node:f,message:"Missing JSDoc return type."}),Z(b)||b.description||!w||a.report({node:f,message:"Missing JSDoc return description."})):
a.report({node:f,message:"Unexpected @{{title}} tag; function has no return statement.",data:{title:b.title}});break;case "constructor":case "class":D=!0;break;case "override":case "inheritdoc":H=!0;break;case "abstract":case "virtual":T=!0;break;case "interface":l=!0}x.hasOwnProperty(b.title)&&b.title!==x[b.title]&&a.report({node:f,message:"Use @{{name}} instead.",data:{name:x[b.title]}});b.type&&d(y.through,b.type);E&&b.type&&c(f,b.type)});H||v||D||l||"FunctionExpression"===b.type&&b.parent&&"Property"===
b.parent.type&&"get"===b.parent.kind||"FunctionExpression"===b.type&&b.parent&&"Property"===b.parent.type&&"set"===b.parent.kind||"FunctionExpression"===b.type&&b.parent&&"MethodDefinition"===b.parent.type&&"constructor"===b.parent.kind||Q(b)||(n||e.u)&&a.report({node:f,message:"Missing JSDoc @{{returns}} for function.",data:{Y:x.Y||"returns"}});var J=Object.keys(h);b.params&&b.params.forEach(function(b,c){"AssignmentPattern"===b.type&&(b=b.left);var d=b.name;"Identifier"===b.type&&(J[c]&&d!==J[c]?
a.report({node:f,message:"Expected JSDoc for '"+d+"' but found "+("'"+J[c]+"'.")}):h[d]||H||a.report({node:f,message:"Missing JSDoc for parameter '"+d+"'."}))});k.P&&((new RegExp(k.P)).test(I.description)||a.report({node:f,message:"JSDoc description does not satisfy the regex pattern."}))}}var m=[],z=a.getSourceCode(),k=a.options[0]||{},x=k.S||{},n=!1!==k.V,A=!1!==k.U,w=!1!==k.W,G=!1!==k.X,y=k.T||{},E=!!Object.keys(y).length;return{ArrowFunctionExpression:b,FunctionExpression:b,FunctionDeclaration:b,
ClassExpression:b,ClassDeclaration:b,"ArrowFunctionExpression:exit":e,"FunctionExpression:exit":e,"FunctionDeclaration:exit":e,"ClassExpression:exit":e,"ClassDeclaration:exit":e,ReturnStatement:function(a){var b=m[m.length-1];b&&null!==a.argument&&(b.u=!0)}}}},da:{meta:{docs:{description:"disallow the use of undeclared variables unless mentioned in `/*global */` comments",category:"Variables",recommended:!0},schema:[{type:"object",properties:{Z:{type:"boolean"}},h:!1}]},create:function(a){var b=a.options[0],
c=b&&!0===b.Z||!1,d=[],e=[];return{Program:function(a){d=a.body.map(L).filter(function(a){return!!a}).map(function(a){return a.source});e=a.body.map(M).filter(function(a){return!!a}).map(function(a){return a.source})},"Program:exit":function(){function b(a){return d.some(function(b){return a.startsWith(b)?a===b||"."===a[b.length]:!1})}function z(a){return e.some(function(b){return a.startsWith(b)?a===b||"."===a[b.length]:!1})}a.getScope().through.forEach(function(d){d=d.identifier;for(var e=d.name,
n=d;n.parent&&"MemberExpression"==n.parent.type;)n=n.parent,e+="."+n.property.name;(n=c)||(n=d.parent,n=!("UnaryExpression"===n.type&&"typeof"===n.operator));n&&(z(e)||b(e)||a.report({node:d,message:"'"+d.name+"' is not defined."}))})}}}}}};
